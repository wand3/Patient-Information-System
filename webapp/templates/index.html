{% extends "base.html" %}
{% block title %}Register{% endblock %}
{% block head %}
  {{ super() }}
  <style type="text/css">
    .important { color: #336699; }
  </style>
{% endblock %}
{% block content %}
<!-- display flashed messages -->
    {% for message in get_flashed_messages() %}
    <div class="alert alert-warning " style="margin: 15px 0; background-color: transparent; color: rgb(89, 31, 31)">
        <button type="button" class="close" data-dismiss="alert" style="color: rgb(112, 43, 43)">&times;</button>
        {{ message }}
    </div>
    {% endfor %}
    
    <!-- search area  -->
    <div class="search">
    <div class="columns">
        <input type="text" class="input" placeholder="Search" name="search_object" hx-get="/search", hx-trigger="keyup changed delay:500ms" hx-target="#results">
    </div>
        <table class="search-results">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Firstname</th>
                    <th>Email</th>
                </tr>
            </thead>
            <tbody id="results"></tbody>
        </table>
    </div>

    <h1>PIS home page</h1>
    <br>
    <h4>Welcome {{ current_user.username }}!</h4>
    
    <div class="d-flex flex-row flex-wrap">
        {% if current_user.is_authenticated %}
            <a href="{{ url_for('auth_views.logout') }}"><button type="button" class="btn button primary-button text-uppercase">Logout</button></a>
        {% else %}

            <a href="{{ url_for('auth_views.signup') }}"><button type="button" class="btn button secondary-button mr-4 text-uppercase" >Sign up</button></a>
            <a href="{{ url_for('auth_views.signin') }}"><button type="button" class="btn button primary-button text-uppercase">Sign in</button></a>

        {% endif %}


        {% if current_user.is_anonymous == True %}
            <!-- <a href="{{ url_for('app_views.register') }}"><button type="button" class="btn button secondary-button mr-4 text-uppercase" >New Patient</button></a> -->
        {% elif current_user.is_anonymous == False and current_user.has_role('administrator', 'record_officer') %}
            <a href="{{ url_for('app_views.register') }}"><button type="button" class="btn button secondary-button mr-4 text-uppercase" >New Patient</button></a>
        {% endif %}

    </div>
    {% block script %}
        {{ super() }}
        <script src="{{ url_for('static', filename='/js/htmx.min.js')}}"></script>
    {% endblock %}
{% endblock %}


    
